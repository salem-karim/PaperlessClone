services:
  rest-api:
    build:
      context: ./rest-api
      dockerfile: Dockerfile.dev
    volumes:
      - ./rest-api:/app # mount source code
      - ~/.m2:/root/.m2 # cache Maven dependencies
    command: ./mvnw spring-boot:run # run dev mode
    environment:
      SPRING_PROFILES_ACTIVE: dev
      SPRING_DATASOURCE_URL: jdbc:postgresql://postgres:5432/paperless
      SPRING_DATASOURCE_USERNAME: paperless
      SPRING_DATASOURCE_PASSWORD: secret
      SPRING_ELASTICSEARCH_URIS: http://elasticsearch:9200
      RABBITMQ_HOST: rabbitmq
      MINIO_ENDPOINT: http://minio:9000
      MINIO_ACCESS_KEY: paperless
      MINIO_SECRET_KEY: paperless123
